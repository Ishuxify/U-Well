<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chat — U-Well</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-poppins bg-gray-50 text-gray-800">
  <header class="bg-white shadow sticky top-0 z-40">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl flex items-center justify-center bg-gradient-to-br from-teal-400 to-cyan-500 text-white">💚</div>
        <span class="text-2xl font-bold">U-Well</span>
      </div>
      <a href="index.html" class="text-teal-600 font-semibold">← Back</a>
    </div>
  </header>

  <main class="container mx-auto px-4 py-12">
    <div class="max-w-3xl mx-auto bg-white rounded-3xl shadow-xl border border-gray-100 p-6 flex flex-col" style="height:70vh;">
      <div id="chat-messages" class="flex-grow overflow-y-auto space-y-4 pr-2 pb-2"></div>

      <!-- Crisis block (hidden by default) -->
      <div id="crisis-box" class="hidden bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-3">
        <strong>Immediate help:</strong>
        <div id="crisis-numbers" class="mt-2"></div>
        <div class="mt-3">
          <a id="call-helpline" class="inline-block px-4 py-2 bg-red-500 text-white rounded-full" href="#">Call now</a>
          <a href="feature-professionals.html" class="ml-3 inline-block px-4 py-2 border rounded-full">Connect to counselor</a>
        </div>
      </div>

      <div class="mt-4 flex flex-wrap gap-3 items-center">
        <input id="chat-input" type="text" placeholder="Type your message..." class="flex-grow min-w-[200px] px-4 py-3 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500">
        <button id="options-btn" class="px-3 py-2 text-xl font-semibold border border-gray-300 rounded-full text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors duration-300" title="More options">＋</button>
        <button id="send-btn" class="px-4 py-3 bg-gradient-to-br from-teal-500 to-cyan-600 text-white font-semibold rounded-full shadow-lg hover:from-teal-600 hover:to-cyan-700 transition-colors duration-300">Send</button>
      </div>
    </div>
  </main>

  <footer class="bg-gray-900 text-white py-8 mt-8">
    <div class="container mx-auto text-center">&copy; 2025 U-Well</div>
  </footer>

  <!-- Camera Modal -->
  <div id="camera-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 items-center justify-center p-4 z-50">
    <div class="bg-white rounded-3xl p-6 max-w-lg w-full">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold">Posture Analysis</h2>
        <button id="close-camera-modal" class="text-gray-500 hover:text-gray-800 text-2xl">×</button>
      </div>
      <video id="webcam" autoplay playsinline class="w-full h-auto rounded-lg bg-black"></video>
      <div class="mt-4 flex gap-3 justify-center">
        <button id="capture-btn" class="px-6 py-3 bg-teal-500 text-white font-semibold rounded-full shadow-lg">📸 Capture</button>
      </div>
      <p id="camera-status" class="mt-4 text-center text-sm text-gray-600">Camera is loading...</p>
    </div>
  </div>

  <!-- NEW: Options Modal -->
  <div id="options-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 items-center justify-center p-4 z-50">
    <div class="bg-white rounded-3xl p-6 max-w-sm w-full">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold">Options</h2>
        <button id="close-options-modal" class="text-gray-500 hover:text-gray-800 text-2xl">×</button>
        <input type="file" id="file-input" accept="image/*" class="hidden">
      </div>
      <div class="flex flex-col space-y-4">
        <button id="camera-btn" class="flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors">
          📸 <span class="font-semibold">Take Photo</span>
        </button>
        <button id="upload-btn" class="flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors">
          📁 <span class="font-semibold">Upload Photo</span>
        </button>
        <div class="flex gap-2">
          <button id="mic-btn" class="flex-grow px-4 py-3 bg-gray-100 text-teal-700 rounded-full hover:bg-gray-200 transition-colors duration-300">
            🎤 <span class="font-semibold">Voice Input</span>
          </button>
          <button id="tts-toggle" class="w-12 px-3 py-2 border border-gray-300 rounded-full text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors duration-300" title="Toggle voice output">🔊</button>
        </div>
        <div class="flex flex-col gap-2">
          <label for="lang-select" class="text-sm text-gray-600">Language:</label>
          <select id="lang-select" class="p-2 rounded-full border border-gray-300 focus:outline-none">
            <option value="en">English</option>
            <option value="hi">हिन्दी</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <script src="chat.js"></script>
</body>
</html>
